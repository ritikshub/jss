Mongoose offers multiple methods for Create, Read, Update, and Delete operations on models. All examples assume const User = mongoose.model('User', schema); and use async/await.â€‹
------------------------------------------------------------------------------------------------------------------------------------------
Operation -->Method--->Description---->Example Code
Create	Model.create(doc)	Creates one or more validated documents â€‹	await User.create({ name: 'John' });
Create	new Model(doc).save()	Instance method with full middleware â€‹	const u = new User({ name: 'Jane' }); await u.save();
Create	Model.insertMany(docs)	Bulk insert array, minimal validation â€‹	await User.insertMany([{ name: 'Bulk1' }]);
Read	Model.find(filter)	Finds all matching documents â€‹	await User.find({ status: 'active' });
Read	Model.findOne(filter)	Finds first matching document â€‹	await User.findOne({ email: 'test@example.com' });
Read	Model.findById(id)	Finds by _id â€‹	await User.findById('userId');
Update	Model.updateOne(filter, update)	Updates first match, returns counts â€‹	await User.updateOne({ email: 'old@test.com' }, { $set: { email: 'new@test.com' } });
Update	Model.updateMany(filter, update)	Updates all matches â€‹	await User.updateMany({ status: 'inactive' }, { $set: { status: 'active' } });
Update	Model.findByIdAndUpdate(id, update)	Updates by ID, returns doc â€‹	await User.findByIdAndUpdate('id', { name: 'Updated' }, { new: true });
Update	Model.findOneAndUpdate(filter, update)	Updates first match, returns doc â€‹	await User.findOneAndUpdate({ role: 'admin' }, { $inc: { count: 1 } });
Update	doc.save()	Saves changes to existing instance â€‹	const u = await User.findById('id'); u.name = 'Patched'; await u.save();
Delete	Model.deleteOne(filter)	Deletes first match, returns counts â€‹	await User.deleteOne({ email: 'spam@test.com' });
Delete	Model.deleteMany(filter)	Deletes all matches â€‹	await User.deleteMany({ status: 'deleted' });
Delete	Model.findByIdAndDelete(id)	Deletes by ID, returns doc â€‹	await User.findByIdAndDelete('userId');
Delete	Model.findOneAndDelete(filter)	Deletes first match, returns doc â€‹	await User.findOneAndDelete({ inactive: true });
Delete	doc.deleteOne()	Deletes current instance â€‹	const u = await User.findById('id'); await u.deleteOne();
------------------------------------------CREATE METHODS -----------------------------------------------------------------------------------------------
--> Model.create(docs): Creates one or multiple documents and saves them to the database. Returns the created document(s). Runs validation and middleware.
--> new Model(doc).save(): Instantiates a new document and saves it. Returns the saved document. Triggers schema middleware.
--> Model.insertMany(docs, options): Inserts multiple documents efficiently in bulk. Returns inserted documents. Faster for large batches, minimal validation by default.

------------------------------------------CRUD METHODS-----------------------------------------------------------------------------------
--> Model.deleteMany(filter): Deletes all documents matching the filter. Returns a result object with deletion count. Does not return the deleted documents.

--> Model.deleteOne(filter): Deletes the first document matching the filter. Returns a result with deletion count. Useful for removing a single doc by condition.

--> Model.find(filter): Finds all documents matching the filter. Returns an array of documents. Supports query chaining and projections.

--> Model.findById(id): Finds a single document by its _id field. Returns null if not found. Shortcut for findOne({ _id: id }).

--> Model.findByIdAndDelete(id): Finds a document by _id and deletes it. Returns the deleted document. Atomic operation.

--> Model.findByIdAndRemove(id): Alias for findByIdAndDelete(). Deletes by _id and returns deleted doc. Functionally identical.

--> Model.findByIdAndUpdate(id, update, options): Finds by _id and updates the document. Returns the updated or original doc based on options. Supports atomic updates.

--> Model.findOne(filter): Finds the first document matching filter. Returns a single document or null. Useful for searching by any criteria.

--> Model.findOneAndDelete(filter): Finds and deletes the first document matching filter. Returns the deleted document. Atomic find-and-remove.

--> Model.findOneAndReplace(filter, replacement, options): Finds one document and replaces it with another. Returns the replaced document. Supports upsert and return options.

--> Model.findOneAndUpdate(filter, update, options): Finds one document matching filter and updates it. Returns the updated or original doc depending on options. Atomic find-and-modify.

--> Model.replaceOne(filter, replacement, options): Replaces the first document matching filter with replacement doc. Returns write result with count info. Does not return replaced doc.

--> Model.updateMany(filter, update, options): Updates all documents matching filter with given update. Returns write operation result with counts. Supports upsert.

--> Model.updateOne(filter, update, options): Updates the first document matching filter. Returns write operation counts. Does not return document(s).
--------------------------------------------------------------------------------------------------------------------------------------------------------------
ğŸ“Œ Queue (Job Queue)
Common Methods
- add(name, data, opts?) â†’ Add a job to the queue with a name, payload, and options.
- addBulk(jobs) â†’ Add multiple jobs at once.
- pause() / resume() â†’ Temporarily stop or resume processing jobs.
- getJob(jobId) â†’ Retrieve a specific job by ID.
- getJobs(types, start, end, asc) â†’ Get jobs by status (waiting, active, completed, failed, etc.).
- getJobCounts() â†’ Get counts of jobs by status.
- remove(jobId) â†’ Remove a job from the queue.
- obliterate(opts?) â†’ Delete all jobs in the queue.
- close() â†’ Gracefully close the queue connection.

Queue Options
- connection â†’ Redis connection details.
- limiter â†’ Rate limiting (e.g., { max: 10, duration: 1000 }).
- defaultJobOptions â†’ Default options for jobs (e.g., removeOnComplete, attempts, backoff).
- prefix â†’ Redis key prefix (default "bull")
-----------------------------------------------------------------------------------------------------------------------------------------
ğŸ“Œ Worker
Common Methods
- Constructor: new Worker(queueName, processorFn, opts)
- close() â†’ Gracefully close the worker.
- Event listeners:
- worker.on("completed", (job, result) => {})
- worker.on("failed", (job, err) => {})
- worker.on("progress", (job, progress) => {})
- worker.on("stalled", (job) => {})

Worker Options
- concurrency â†’ Max concurrent jobs (default: 1).
- limiter â†’ Rate limiting per worker.
- removeOnComplete â†’ Auto-remove completed jobs (by count or age).
- removeOnFail â†’ Auto-remove failed jobs (by count or age).
- lockDuration â†’ Job lock TTL in ms (default: 30000).
- stalledInterval â†’ Interval to check for stalled jobs (default: 30000).
- maxStalledCount â†’ Max stalls before marking job failed.
- autorun â†’ Whether the worker starts processing immediately (default: true).
- prefix â†’ Redis key prefix.
------------------------------------------------------------------------------------------------------------------------------------------
âš ï¸ Important Points: 
- Rate Limiting: Both Queue and Worker support limiter options, but they apply differently 
- (Queue throttles job addition, Worker throttles job execution).
- Cleanup: Use removeOnComplete and removeOnFail to avoid unbounded Redis growth.
- Concurrency: Worker concurrency is critical for throughput â€” set it based on your workload.
-------------------------------------------------------------------------------------------------------------------------------------
Bull Queue Cheat Sheet:
# BullMq Cheat Sheet
await queue.add('jobName', { ...data }, {

  /* ------------------------ Core Options ------------------------ */

  jobId: 'logical-id-123',      // Custom job ID (useful for de-duplication)
  priority: 1,                  // Lower number = higher priority (1 is highest)
  delay: 5000,                  // Delay before first execution (in ms)
  lifo: false,                  // true = add to end (LIFO)
  attempts: 3,                  // Total attempts: 1 initial + retries

  backoff: {                    // Backoff strategy for retries
    type: 'fixed' | 'exponential' | 'customName',
    delay: 2000                 // Backoff duration
  },

  /* ------------------------ Repeat / Scheduler ------------------------ */

  repeat: {
    every: 60000,               // Run every X ms
    cron: '*/10 * * * * *',     // Or provide a cron expression
    limit: 100,                 // Max total runs
    jobId: 'scheduler-123',     // Stable job identity for scheduler
    startDate: new Date(),      // Optional start time
    endDate: new Date(),        // Optional end time
    tz: 'Asia/Kolkata'          // Timezone
  },

  /* ------------------------ Cleanup Behavior ------------------------ */

  removeOnComplete: true | number,  // Auto-remove job when done (or keep last N)
  removeOnFail: false | number,     // Auto-remove on failure

  /* ------------------------ Misc Options ------------------------ */

  timeout: 30000,               // Max processing time before forced failure
  attemptsMade: 0,              // Internal use
});

----------------------------------------------------------------------------------------------------------------------------
Worker Cheat Sheet:
const worker = new Worker('q', processor, {
  connection,                 // Redis connection
  concurrency: 5,             // parallel jobs
  autorun: true,              // start immediately

  // Locking / stalled
  lockDuration: 30000,
  lockRenewInterval: 15000,
  skipStalledCheck: false,
  maxStalledCount: 1,
  stalledInterval: 30000,

  // Execution mode
  useWorkerThreads: false,
  workerType: 'sandbox',      // 'sandbox' | 'direct' | 'process' | 'thread'

  // Cleanup defaults (if not set in job opts)
  removeOnComplete: true,
  removeOnFail: false,

  // Custom backoff
  backoffStrategies: {
    customStrategy: (attemptsMade, err, job) => attemptsMade * 2000
  }
});
-----------------------------------------------------------------------------------------------------------------------------

